@page "/usuarios"
@using Microsoft.AspNetCore.Authorization
@using OUT_OS_APP.EQUIPGO.DTO.DTOs.Equipo

<!-- ================================ -->
<!-- REFERENCIA CSS -->
<!-- ================================ -->
<link href="css/Dashboard/dashboard.css" rel="stylesheet" />

<div class="frame-container">

    <!-- ================================ -->
    <!-- ENCABEZADO -->
    <!-- ================================ -->
    <div class="dashboard-parent">
        <b class="dashboard-equipgo">Gestión de Usuarios</b>
        <div class="logo-os">
            <img class="dashboard-vector-icon" alt="Logo" src="img/logoOutsourcing.png" />
        </div>
    </div> <!-- ✅ ESTE ES EL DIV QUE FALTABA CERRAR -->

    <!-- ================================ -->
    <!-- CONTADORES -->
    <!-- ================================ -->
    <div class="info">

        <div class="card-registros">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
            </svg>
            <div class="datos">
                <b class="b">@TotalUsuarios</b>
                <b class="transacciones-de-hoy">Total Usuarios</b>
            </div>
        </div>

        <div class="card-registros">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
            </svg>
            <div class="datos">
                <b class="b">@UsuariosActivos</b>
                <b class="transacciones-de-hoy">Usuarios Activos</b>
            </div>
        </div>

        <div class="card-alerta">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
            </svg>
            <div class="datos">
                <b class="b">@UsuariosInactivos</b>
                <b class="transacciones-de-hoy">Usuarios Inactivos</b>
            </div>
        </div>

    </div>

    <!-- ================================ -->
    <!-- CONTENIDO PRINCIPAL -->
    <!-- ================================ -->
    <div class="contenido">

        <!-- FILTROS -->
        <div class="dashboard-filtros">

            <div class="dashboard-filtro">

                <div class="buscar-nombre">
                    <b class="dashboard-equipgo">Área</b>
                    <div class="frame-div">
                        <div class="placeholder-wrapper">
                            <input type="text" class="placeholder" @bind="filtroArea" placeholder="Filtrar por área..." />
                        </div>
                    </div>
                </div>

                <div class="buscar-nombre">
                    <b class="dashboard-equipgo">Campaña</b>
                    <div class="frame-div">
                        <div class="placeholder-wrapper">
                            <input type="text" class="placeholder" @bind="filtroCampaña" placeholder="Filtrar por campaña..." />
                        </div>
                    </div>
                </div>

                <div class="buscar-nombre">
                    <b class="dashboard-equipgo">Estado</b>
                    <div class="frame-div">
                        <div class="placeholder-wrapper">
                            <input type="text" class="placeholder" @bind="filtroEstado" placeholder="Filtrar por estado..." />
                        </div>
                    </div>
                </div>

            </div>

            <!-- BOTONERA -->
            <div class="botonera">
                <button class="botn3" @onclick="Filtrar">Aplicar Filtros
                </button>
                <button class="botn3" style="background-color:#E0E0E0; color:#292929;" @onclick="LimpiarFiltros">Limpiar
                </button>
            </div>

        </div>

        <!-- TABLA DE USUARIOS -->
        @if (usuariosFiltrados == null)
        {
            <p>Cargando usuarios...</p>
        }
        else if (!usuariosFiltrados.Any())
        {
            <p>No hay usuarios que coincidan con los filtros.</p>
        }
        else
        {
            <div class="table-wrapper">
                <table id="tablaUsuarios" style="width:100%;">
                    <thead>
                        <tr>
                            <th>Tipo Documento</th>
                            <th>Número Documento</th>
                            <th>Nombre Completo</th>
                            <th>Área</th>
                            <th>Campaña</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var usuario in usuariosFiltrados)
                        {
                            <tr>
                                <td>@usuario.TipoDocumento</td>
                                <td>@usuario.NumeroDocumento</td>
                                <td>@usuario.Nombres @usuario.Apellidos</td>
                                <td>@usuario.Area</td>
                                <td>@usuario.Campana</td>
                                <td>@usuario.Estado</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }

    </div>
</div>

<!-- ================================ -->
<!-- ESTILOS -->
<!-- ================================ -->
<style>
    #tablaUsuarios {
        width: 100% !important;
        border-collapse: collapse !important;
    }

    #tablaUsuarios th {
        background-color: #E9002B !important;
        color: white !important;
        padding: 8px 12px !important;
        text-align: center !important;
        font-weight: bold !important;
        font-size: 0.85rem !important;
        border: none !important;
    }

    #tablaUsuarios td {
        padding: 8px 12px !important;
        border-bottom: 1px solid #ddd !important;
        text-align: center !important;
        font-size: 0.85rem !important;
    }

    #tablaUsuarios tr:nth-child(even) {
        background-color: #f9f9f9 !important;
    }

    #tablaUsuarios tr:hover {
        background-color: #f1f1f1 !important;
    }
</style>